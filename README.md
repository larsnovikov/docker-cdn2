CDN сервер для [https://github.com/larsnovikov/cdn]
=====================

# Установка

 - Склонируйте этот репозиторий
 - Выполните `bash startup.sh`
 - Следуйте подсказкам
 - Измените доступы к БД в `/config/db-local.php`
 - Измените параметры работы c CDN в `/config/cdn-local.php`
 - Создайте первое хранилище выполнив `php yii command/add-storage <назвние хранилища>` внутри php-fpm контейнера;

# Описание

Сборка происходит из трех контейнеров:
 - nginx_front (web-сервер принимающий и обрабатывающий запросы к фотографиям)
 - nginx_app (web-сервер принимающий и обрабатывающий запросы к приложению (загрузка и удаление картинки))
 - php-fpm (fpm для nginx_app)
 
# Хранение картинок

<p>
    Исходники картнок должны располагаться в директории images/input 
</p>
<p>
    Файлы водяных знаков должны располагаться в директории images/watermark 
</p>
<p>
    Выходные картинки будут сохраняться в директории images/output/storage_name, где storage_name - папка хранилища. Предполагается, что хранилища будут примонтированными жесткими дисками.
</p>
